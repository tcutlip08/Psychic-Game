<!DOCTYPE html>

<head>
    <title>Hangman</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <style>
        .header img {
            width: 100%;
            height: auto;
            margin: 0;
        }

        .body {
            background-color: darkgray;
            width: 100%;
            height: 100%
        }

        .container {
            border-style: dotted;
            border-color: black;
            text-align: center;
        }

        .row {
            background-color: lightblue;
            margin: 1%;
        }

        .rightPanel{
            text-align: center;
            width: 100%;
            margin: 5%;
        }

        .column {
            border-style: dotted;
            border-color: green;
        }
    </style>
</head>

<header class="header">
    <img src="assets\images\Metalhead Background.jpg">
</header>

<body class="body">
    <div class="container">
        <div class="row">
        </div>
        <div class="row">
            <div class="col-md-8 column" id="video">
                <h1 style="text-align: center; padding: 10px; display: none;">Guess Away</h1>
                <!-- METALLICA -->
                <iframe style="height: 90%; display: none; padding-top: 10px;" id="metallica"
                    src="https://www.youtube.com/embed/YinYm4mbpvQ" frameborder="0"
                    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen></iframe>
                <!-- NONPOINT -->

                <!-- SEVENDUST -->

                <!-- KORN -->

                <!-- MEGADETH -->

                <!-- PANTERA -->

                <!-- DISTURBED -->

                <!-- GODSMACK -->

                <!-- ACDC -->

                <!-- SLIPKNOT -->

            </div>
            <div class="col-md-4 column">
                <div class="row rightPanel" id="bandName-onScreen">Guess the Band Name</div>
                <div class="row rightPanel" id="triesLeft-onScreen">Amount of Tries: 10</div>
                <div class="row rightPanel" style="overflow-wrap: normal;">Letters Guessed:&nbsp;<span id=lettersGuessed-onScreen></span></div>
            </div>
        </div>
    </div>
    <script type="text/javascript">

        //Store user guess
        //test guess to see if its already been guessed
        //if it has not been guessed already test it accross the randomly generated band name character by character
        //if the guessed letter matches any character (multiple) correctGuesses++
        //push userGuess into alreadyGuessed by the end up the loop
        //when correctGuesses = bandName display "you win" band picture and song
        //--------------------------------------------------------------------------------------------------------
        //, "nonpoint", "sevendust", "korn", "megadeth", "pantera", "disturbed", "godsmack", "acdc", "slipknot"
        const allBandNames = ["metallica", "nonpoint", "sevendust", "korn", "megadeth", "pantera", "disturbed", "godsmack", "acdc", "slipknot"];
        var bandName = allBandNames[Math.floor(Math.random() * allBandNames.length)];
        const alphabet = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
        var alreadyGuessed = [];
        var correctGuesses = 0;
        var triesLeft = 10;
        var unfinishedBandName = [];
        var correctGuessesArray = [];

        for (let i = 0; i < bandName.length; i++) {
            unfinishedBandName.push("_ ");
            var bandNameOnScreen = document.getElementById("bandName-onScreen");
            bandNameOnScreen.textContent = unfinishedBandName.join(" ").toUpperCase();
        }

        document.onkeyup = function (event) {
            let letterGuessed = event.key.toLocaleLowerCase();

            for (let i = 0; i < alphabet.length; i++) {
                console.log(bandName);

                //making sure the entered key is a letter
                if (letterGuessed === alphabet[i]) {

                    //checking if the user has already guessed the value before testing others to not have duplicate data
                    if (triesLeft > 0) {

                        //no duplicate data
                        if (alreadyGuessed.includes(letterGuessed)) {
                            alert("You already guessed that, try again");
                        }

                        //if letter guessed is in the band name add value to already guessed
                        else if (bandName.includes(letterGuessed) && (correctGuesses !== bandName.length)) {

                            alreadyGuessed.push(letterGuessed);
                            correctGuessesArray.push(letterGuessed);

                            //figure out how to incremate for each letter in the band name // example: metallica has two l's if letter l is guessed it needs to increment twice
                            for (let i = 0; i < bandName.length; i++) {
                                // console.log("We atleast made it here");
                                if (letterGuessed === bandName[i]) {
                                    correctGuessesArray.push(letterGuessed);
                                    unfinishedBandName[i] = letterGuessed;
                                    correctGuesses++;
                                    if (correctGuesses === bandName.length) {
                                        alert("Congratulations");
                                        var videoOnScreen = document.getElementById(bandName).style.display = "block";
                                        videoOnScreen = document.getElementById(bandName).style.textAlign = "center";
                                        videoOnScreen.autoplay = true;
                                        // videoOnScreen.load();
                                        // videoOnScreen.style.display = block;

                                        //clear all values
                                        bandName = allBandNames[Math.floor(Math.random() * allBandNames.length)];
                                        alreadyGuessed = [];
                                        correctGuesses = 0;
                                        triesLeft = 10;
                                        unfinishedBandName = [];
                                        correctGuessesArray = [];

                                        for (let i = 0; i < bandName.length; i++) {
                                            unfinishedBandName.push("_ ");
                                        }
                                        //display unfinished band name
                                        var bandNameOnScreen = document.getElementById("bandName-onScreen");
                                        bandNameOnScreen.textContent = unfinishedBandName.join(" ").toUpperCase();
                                        var triesLeftOnScreen = document.getElementById("triesLeft-onScreen");
                                        triesLeftOnScreen.textContent = ("Amount of Tries: " + triesLeft);
                                    }
                                }

                                else {
                                }
                                //display unfinished band name
                                var bandNameOnScreen = document.getElementById("bandName-onScreen");
                                bandNameOnScreen.textContent = unfinishedBandName.join(" ").toUpperCase();
                            }
                        }

                        //if both conditions up top fail that means it IS a letter but was not in the band name so decrement triesLeft and still push alreadyGuessed
                        else {
                            alreadyGuessed.push(letterGuessed);
                            triesLeft--;

                            //display tries left
                            var triesLeftOnScreen = document.getElementById("triesLeft-onScreen");
                            triesLeftOnScreen.textContent = ("Amount of Tries: " + triesLeft);
                        }
                    }
                    else {
                        alert("Game Over!!\nRefresh the page to try again");

                        bandName = allBandNames[Math.floor(Math.random() * allBandNames.length)];
                        alreadyGuessed = [];
                        correctGuesses = 0;
                        triesLeft = 10;
                        unfinishedBandName = [];
                        correctGuessesArray = [];

                        for (let i = 0; i < bandName.length; i++) {
                            unfinishedBandName.push("_ ");
                        }
                        var bandNameOnScreen = document.getElementById("bandName-onScreen");
                        bandNameOnScreen.textContent = unfinishedBandName.join(" ").toUpperCase();
                        var triesLeftOnScreen = document.getElementById("triesLeft-onScreen");
                        triesLeftOnScreen.textContent = ("Amount of Tries: " + triesLeft);
                    }

                    //display already guessed
                    var alreadyGuessedOnScreen = document.getElementById("lettersGuessed-onScreen");
                    alreadyGuessedOnScreen.textContent = alreadyGuessed.join(", ");
                }
                else {
                }
            }

            //TEST VALUES HERE//

            // console.log("Tries Left: " + triesLeft);
            // console.log("Correct Guesses: " + correctGuesses);

            //TEST VALUES HERE//
        }
        //DISPLAY VIDEO ON CORRECT FULL WORD
        // function playVideo(bandName) {
        //     // for (let i = 0; i < allBandNames.length; i++) {
        //     "metallica", "nonpoint", "sevendust", "korn", "megadeth", "pantera", "disturbed", "godsmack", "acdc", "slipknot"
        //     switch (bandName) {
        //         case "metallica":
        //             break;
        //         case "nonpoint":
        //             break;
        //         case "sevendust":
        //             break;
        //         case "korn":
        //             break;
        //         case "megadeth":
        //             break;
        //         case "pantera":
        //             break;
        //         case "disturbed":
        //             break;
        //         case "godsmack":
        //             break;
        //         case "acdc":
        //             break;
        //         case "slipknot":
        //             break;
        //     }
        // }
        // }
    </script>
</body>

</html>